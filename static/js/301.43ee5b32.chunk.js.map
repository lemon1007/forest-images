{"version":3,"file":"static/js/301.43ee5b32.chunk.js","mappings":"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","sources":["components/UpLoader.js","components/Tips.js","pages/Home.js"],"sourcesContent":["import React, {useRef} from 'react';\nimport {useStores} from '../stores';\nimport {observer, useLocalObservable} from 'mobx-react';\nimport {Upload, message, Spin} from 'antd';\nimport {InboxOutlined} from '@ant-design/icons';\nimport styled from 'styled-components';\n\nconst {Dragger} = Upload;\n\nconst Wrapper = styled.div`\n  width: 100%;\n  padding: 0 20px 20px 20px;\n  border: 1px dashed #42b983;\n  margin-top: 30px;\n  border-radius: 10px;\n`;\nconst ImgUrl = styled.a`\n  word-wrap: break-word;\n  word-break: normal;\n  max-width: 100%;\n  font-size: 12px;\n\n  &:hover {\n    color: #5edaa1;\n  }\n`;\n\nconst ImgShow = styled.img`\n  max-width: 50%;\n`;\nconst H2 = styled.h2`\n  margin: 20px 0;\n  text-align: center;\n  color: #42b983;\n  font-weight: 800;\n  width: 107.5%;\n\n`;\nconst Input = styled.input`\n  border: none;\n  font-size: 12px;\n  padding: 5px;\n  width: 120px;\n  height: 30px;\n  border-radius: 10px;\n  margin-right: 10px;\n  margin-top: 7px;\n\n  &:focus {\n    outline: 1px solid #42b983;\n  }\n`;\nconst Dt = styled.dt`\n  margin-top: 15px;\n  font-weight: 600;\n  color: #42b983;\n\n`;\nconst Dd = styled.dd`\n  padding-top: 3px;\n  color: #42b983;\n`;\n\nconst StyledInboxOutlined = styled(InboxOutlined)`\n  svg {\n    fill: #42b983;\n  }\n`;\n\n\nconst Component = observer(() => {\n\n  const {ImageStore, UserStore} = useStores();\n  const refWidth = useRef();\n  const refHeight = useRef();\n  const store = useLocalObservable(() => ({\n\n    width: null,\n    setWidth(width) {\n      store.width = width;\n    },\n    get widthStr() {\n      return store.width ? `/w/${store.width}` : '';\n    },\n\n    height: null,\n    setHeight(height) {\n      store.height = height;\n    },\n    get heightStr() {\n      return store.height ? `/h/${store.height}` : '';\n    },\n\n    get fullStr() {\n      return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr;\n    }\n  }));\n\n  const bindWidth = () => {\n    store.setWidth(refWidth.current.value);\n  };\n\n  const bindHeight = () => {\n    store.setHeight(refHeight.current.value);\n  };\n\n  const props = {\n    showUploadList: false,\n    beforeUpload: file => {\n      ImageStore.setFile(file);\n      ImageStore.setFilename(file.name);\n      if (UserStore.currentUser === null) {\n        message.warning('请先登录再上传图片！');\n        return false;\n      }\n      if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\n        message.error('上传文件类型错误');\n        return false;\n      }\n      if (file.size > 1024 * 1024) {\n        message.error('上传文件最大1M');\n        return false;\n      }\n      ImageStore.upload()\n        .then((serverFile) => {\n          console.log('上传成功');\n        })\n        .catch((error) => {\n          console.log('上传失败');\n          console.log(error);\n        });\n      return false;\n    }\n  };\n\n  return (\n    <div>\n      <Spin tip=\"图片上传中……\" spinning={ImageStore.isUploading}>\n        <Dragger {...props}>\n          <p className=\"ant-upload-drag-icon\">\n            <StyledInboxOutlined/>\n          </p>\n          <p className=\"ant-upload-text\" style={{color: '#42b983'}}>点击或拖拽上传图片</p>\n          <p className=\"ant-upload-hint\" style={{\n            fontSize: '12px',\n            padding: '10px'\n          }}>仅支持.svg/.png/.jpg/.jpeg/.gif格式的图片，图片最大不能超过1M</p>\n        </Dragger>\n      </Spin>\n      <div>\n        {\n          ImageStore.serverFile ? <Wrapper>\n            <H2>上传结果</H2>\n            <dl>\n              <Dt>线上地址:</Dt>\n              <Dd>\n                <ImgUrl href={ImageStore.serverFile.attributes.url.attributes.url} target=\"_blank\">\n                  {ImageStore.serverFile.attributes.url.attributes.url}\n                </ImgUrl>\n              </Dd>\n\n              <Dt>文件名:</Dt>\n              <Dd>{ImageStore.serverFile.attributes.filename}</Dd>\n\n              <Dt>图片预览:</Dt>\n              <Dd>\n                <ImgShow src={ImageStore.serverFile.attributes.url.attributes.url}/>\n              </Dd>\n\n              <Dt>尺寸定制:</Dt>\n              <Dd>\n                <Input ref={refWidth} onChange={bindWidth} placeholder=\"最大宽度(可选)\"/>\n                <Input ref={refHeight} onChange={bindHeight} placeholder=\"最大高度(可选)\"/>\n              </Dd>\n              <Dd>\n                <ImgUrl href={store.fullStr} target=\"_blank\">{store.fullStr}</ImgUrl>\n              </Dd>\n            </dl>\n          </Wrapper> : null\n        }\n      </div>\n    </div>\n  );\n});\n\n\nexport default Component;","import React from 'react';\nimport {useStores} from '../stores';\nimport {observer} from 'mobx-react';\nimport styled from 'styled-components';\n\nconst Tips = styled.div`\n  color: white;\n  margin: 25px auto;\n  padding: 15px;\n  text-align: center;\n  background-color: #42b983;\n`;\n\nconst Component = observer(({children}) => {\n\n  const {UserStore} = useStores();\n\n  return (\n    <>\n      {UserStore.currentUser ? null : <Tips>{children}</Tips>}\n    </>\n  );\n});\n\n\nexport default Component;","import React from 'react';\nimport {observer} from 'mobx-react';\nimport UpLoader from '../components/UpLoader';\nimport Tips from '../components/Tips';\n\nconst Component = observer(() => {\n  return (\n    <>\n      <Tips>提示:请先登录再上传图片</Tips>\n      <UpLoader/>\n    </>\n  );\n});\n\nexport default Component;"],"names":["Dragger","Upload","Wrapper","styled","ImgUrl","ImgShow","H2","Input","Dt","Dd","StyledInboxOutlined","InboxOutlined","observer","useStores","ImageStore","UserStore","refWidth","useRef","refHeight","store","useLocalObservable","width","setWidth","widthStr","height","setHeight","heightStr","fullStr","serverFile","attributes","url","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","test","type","size","upload","then","console","log","catch","error","tip","spinning","isUploading","className","style","color","fontSize","padding","href","target","filename","src","ref","onChange","current","value","placeholder","Tips","children","UpLoader"],"sourceRoot":""}